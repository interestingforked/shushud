#!/usr/bin/env ruby
# encoding: utf-8

trap("INT")  {@working = false}
trap("TERM") {@working = false}

require "./lib/shushu"

@working = true
while(@working)
  begin
    Utils.exec("SELECT transform()")
  rescue => e
    log(:level => :error, :exception => e.message)
  ensure
    log(:transformer => :cycle)
  end
end
